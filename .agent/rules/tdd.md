# Test-Driven Development (TDD) 규칙

## 개요
이 프로젝트의 **코어 로직(Core Logic)**은 반드시 TDD(Test-Driven Development) 방식으로 구현해야 합니다.

## 적용 범위

### TDD 적용 대상 (코어 로직)
- ✅ **계산 엔진** (`calculator.js`)
  - 수식 파싱 및 평가
  - 삼각함수, 로그, 지수 계산
  - 각도 모드 변환 (DEG/RAD)
  - 오류 처리
  
- ✅ **상태 관리** (`state.js`)
  - 상태 업데이트 로직
  - 상태 구독 메커니즘
  - 로컬 스토리지 연동

- ✅ **히스토리 관리** (`history.js`)
  - 히스토리 추가/삭제
  - 히스토리 저장/불러오기
  - 최대 항목 제한

- ✅ **메모리 관리**
  - 메모리 연산 (mc, m+, m-, mr)

- ✅ **유틸리티 함수** (`utils.js`)
  - 숫자 포맷팅
  - 입력 검증
  - 데이터 변환

### TDD 제외 대상 (UI 레이어)
- ❌ UI 컴포넌트 (`ui.js`)
- ❌ 이벤트 핸들러 (사용자 인터랙션)
- ❌ DOM 조작
- ❌ 스타일링

> **중요**: UI는 자동화된 테스트를 작성하지 않습니다. 수동 테스트로만 검증합니다.

## TDD 개발 프로세스

### Red-Green-Refactor 사이클

1. 🔴 Red: 실패하는 테스트 작성
2. 🟢 Green: 테스트를 통과하는 최소한의 코드 작성
3. 🔵 Refactor: 코드 개선 및 리팩토링
4. 반복

## 테스트 커버리지 목표
- **코어 로직**: 최소 80% 이상
- **주요 함수**: 100% (계산 엔진, 상태 관리)
- **엣지 케이스**: 모두 커버

## 실행 명령어

```bash
# 모든 테스트 실행
npm test

# Watch 모드 (개발 중)
npm run test:watch

# 커버리지 확인
npm run test:coverage
```

## 개발 워크플로우

### 새 기능 추가 시
1. **테스트 작성**: 기능 요구사항을 테스트로 작성
2. **테스트 실행**: 실패 확인 (Red)
3. **코드 작성**: 테스트를 통과하는 최소 코드
4. **테스트 실행**: 성공 확인 (Green)
5. **리팩토링**: 코드 품질 개선
6. **테스트 실행**: 여전히 성공하는지 확인
7. **커밋**: 테스트와 코드를 함께 커밋

## 금지 사항

❌ **절대 하지 말 것**
1. 테스트 없이 코어 로직 구현
2. 구현 후 테스트 작성 (TDD의 핵심은 "테스트 먼저")
3. 테스트를 코드에 맞추기
4. 테스트 건너뛰기

## 체크리스트

코어 로직 구현 전 확인:
- [ ] 테스트 파일이 생성되었는가?
- [ ] 테스트가 먼저 작성되었는가?
- [ ] 테스트가 실패하는가? (Red)
- [ ] 최소한의 코드로 테스트를 통과했는가? (Green)
- [ ] 리팩토링 후에도 테스트가 통과하는가? (Refactor)
- [ ] 엣지 케이스가 커버되었는가?
- [ ] 커버리지가 80% 이상인가?

---

**중요**: 이 규칙은 코어 로직에만 적용됩니다. UI 레이어는 수동 테스트로만 검증합니다.
